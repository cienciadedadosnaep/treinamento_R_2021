<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Atividades | Anotações do treinamento R</title>
  <meta name="description" content="Este minicurso é dedicado aos integrantes do projeto Ciência de Dados na Escolas Pública." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Atividades | Anotações do treinamento R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este minicurso é dedicado aos integrantes do projeto Ciência de Dados na Escolas Pública." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Atividades | Anotações do treinamento R" />
  
  <meta name="twitter:description" content="Este minicurso é dedicado aos integrantes do projeto Ciência de Dados na Escolas Pública." />
  

<meta name="author" content="Robson Wilson Silva Pessoa" />


<meta name="date" content="2021-08-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="manipulação-de-dados.html"/>
<link rel="next" href="controle-de-versões-de-projetos.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/formattable_widget-binding-0.2.1/formattable_widget.js"></script>
<link href="libs/jquery-sparkline-2.1.2/jquery.sparkline.css" rel="stylesheet" />
<script src="libs/jquery-sparkline-2.1.2/jquery.sparkline.js"></script>
<script src="libs/sparkline-binding-2.0/sparkline.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Pré-Requisitos</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Instalações e configurações</a></li>
<li class="chapter" data-level="3" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html"><i class="fa fa-check"></i><b>3</b> Manipulação de dados</a>
<ul>
<li class="chapter" data-level="3.1" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#importanto-conjunto-de-dados"><i class="fa fa-check"></i><b>3.1</b> Importanto conjunto de dados</a></li>
<li class="chapter" data-level="3.2" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#objetos-e-vetores"><i class="fa fa-check"></i><b>3.2</b> Objetos e vetores</a></li>
<li class="chapter" data-level="3.3" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#data-frames"><i class="fa fa-check"></i><b>3.3</b> Data frames</a></li>
<li class="chapter" data-level="3.4" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#operadores-de-seleção"><i class="fa fa-check"></i><b>3.4</b> Operadores de seleção</a></li>
<li class="chapter" data-level="3.5" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#utilizando-e-criando-funções-no-r"><i class="fa fa-check"></i><b>3.5</b> Utilizando e criando funções no R</a></li>
<li class="chapter" data-level="3.6" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#operadores-lógicos-e-aritméticos"><i class="fa fa-check"></i><b>3.6</b> Operadores lógicos e aritméticos</a></li>
<li class="chapter" data-level="3.7" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#loopings-de-programação-for-e-while"><i class="fa fa-check"></i><b>3.7</b> Loopings de programação: for e while</a></li>
<li class="chapter" data-level="3.8" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#o-operador-pipe"><i class="fa fa-check"></i><b>3.8</b> O operador pipe (%&gt;%)</a></li>
<li class="chapter" data-level="3.9" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#importando-arquivos-de-texto-.csv-e-.txt"><i class="fa fa-check"></i><b>3.9</b> Importando arquivos de texto: .csv e .txt</a></li>
<li class="chapter" data-level="3.10" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#importando-arquivos-excel-.xls-e-.xlsx"><i class="fa fa-check"></i><b>3.10</b> Importando arquivos excel: .xls e .xlsx</a></li>
<li class="chapter" data-level="3.11" data-path="manipulação-de-dados.html"><a href="manipulação-de-dados.html#manipulação-de-bases-de-dados-o-pacote-dplyr"><i class="fa fa-check"></i><b>3.11</b> Manipulação de bases de dados (o pacote dplyr)"</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="atividades.html"><a href="atividades.html"><i class="fa fa-check"></i><b>4</b> Atividades</a>
<ul>
<li class="chapter" data-level="4.1" data-path="atividades.html"><a href="atividades.html#carregamento-de-bibliotecas-e-dados"><i class="fa fa-check"></i><b>4.1</b> Carregamento de bibliotecas e dados</a></li>
<li class="chapter" data-level="4.2" data-path="atividades.html"><a href="atividades.html#exemplo-de-aplicação-do-lubridate"><i class="fa fa-check"></i><b>4.2</b> Exemplo de aplicação do Lubridate</a></li>
<li class="chapter" data-level="4.3" data-path="atividades.html"><a href="atividades.html#uso-do-data-table-dt"><i class="fa fa-check"></i><b>4.3</b> Uso do <em>Data Table</em> (DT)</a></li>
<li class="chapter" data-level="4.4" data-path="atividades.html"><a href="atividades.html#resolução-de-situações-problemas"><i class="fa fa-check"></i><b>4.4</b> Resolução de situações problemas</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="atividades.html"><a href="atividades.html#código-filtros-e-seleções"><i class="fa fa-check"></i><b>4.4.1</b> Código filtros e seleções</a></li>
<li class="chapter" data-level="4.4.2" data-path="atividades.html"><a href="atividades.html#código---manipulação-de-datas"><i class="fa fa-check"></i><b>4.4.2</b> Código - manipulação de datas</a></li>
<li class="chapter" data-level="4.4.3" data-path="atividades.html"><a href="atividades.html#código-gráficos"><i class="fa fa-check"></i><b>4.4.3</b> Código Gráficos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="controle-de-versões-de-projetos.html"><a href="controle-de-versões-de-projetos.html"><i class="fa fa-check"></i><b>5</b> Controle de versões de projetos</a></li>
<li class="chapter" data-level="6" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i><b>6</b> Dashboards</a></li>
<li class="chapter" data-level="7" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html"><i class="fa fa-check"></i><b>7</b> Saúde - Probabilidade - Mapas</a>
<ul>
<li class="chapter" data-level="7.1" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#recursos-físicos-e-humanos-da-rede-assistencial-de-saúde"><i class="fa fa-check"></i><b>7.1</b> Recursos físicos e humanos da rede assistencial de saúde</a></li>
<li class="chapter" data-level="7.2" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#objetivo-de-desenvolvimento-sustentável"><i class="fa fa-check"></i><b>7.2</b> Objetivo de Desenvolvimento Sustentável</a></li>
<li class="chapter" data-level="7.3" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#ibge-pense"><i class="fa fa-check"></i><b>7.3</b> IBGE PENSE</a></li>
<li class="chapter" data-level="7.4" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#sisvan"><i class="fa fa-check"></i><b>7.4</b> SISVAN</a></li>
<li class="chapter" data-level="7.5" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#informações-sobre-saúde-sei"><i class="fa fa-check"></i><b>7.5</b> Informações sobre saúde SEI</a></li>
<li class="chapter" data-level="7.6" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#informações-sobre-câncer"><i class="fa fa-check"></i><b>7.6</b> Informações sobre câncer</a></li>
<li class="chapter" data-level="7.7" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#divisão-dos-distritos-sanitários"><i class="fa fa-check"></i><b>7.7</b> Divisão dos distritos sanitários</a></li>
<li class="chapter" data-level="7.8" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#doenças-de-condições-crônicas-e-infecções-sexualmente-transmissíveis"><i class="fa fa-check"></i><b>7.8</b> Doenças de Condições Crônicas e Infecções Sexualmente Transmissíveis</a></li>
<li class="chapter" data-level="7.9" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#tabnet-salvador"><i class="fa fa-check"></i><b>7.9</b> Tabnet Salvador</a></li>
<li class="chapter" data-level="7.10" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#histogramas"><i class="fa fa-check"></i><b>7.10</b> Histogramas</a></li>
<li class="chapter" data-level="7.11" data-path="saúde-probabilidade-mapas.html"><a href="saúde-probabilidade-mapas.html#probabilidade-versus-possibilidade"><i class="fa fa-check"></i><b>7.11</b> Probabilidade versus possibilidade</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Anotações do treinamento R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="atividades" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Atividades</h1>
<div id="carregamento-de-bibliotecas-e-dados" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Carregamento de bibliotecas e dados</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="atividades.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="atividades.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb8-2"><a href="atividades.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb8-3"><a href="atividades.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-4"><a href="atividades.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;magrittr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="atividades.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="atividades.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb14-2"><a href="atividades.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb14-3"><a href="atividades.html#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="atividades.html#cb14-4" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/all_data_v00.csv&quot;</span>, </span>
<span id="cb14-5"><a href="atividades.html#cb14-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">X1 =</span> <span class="fu">col_integer</span>(), </span>
<span id="cb14-6"><a href="atividades.html#cb14-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">id =</span> <span class="fu">col_integer</span>(), <span class="at">date =</span> <span class="fu">col_date</span>(<span class="at">format =</span><span class="st">&quot;%Y-%m-%d&quot;</span>)), </span>
<span id="cb14-7"><a href="atividades.html#cb14-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">encoding =</span> <span class="st">&quot;ISO-8859-1&quot;</span>))</span></code></pre></div>
</div>
<div id="exemplo-de-aplicação-do-lubridate" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Exemplo de aplicação do Lubridate</h2>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="atividades.html#cb15-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2014</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="atividades.html#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(aisp<span class="sc">==</span><span class="st">&quot;AISP 12 - Itapuã&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="atividades.html#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(mes,homicidios) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(homicidios) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="atividades.html#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">140101</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 12 x 3
##      mes homicidios MES  
##    &lt;dbl&gt;      &lt;dbl&gt; &lt;ord&gt;
##  1     7          7 jul  
##  2     5          8 mai  
##  3     3         10 mar  
##  4     9         10 set  
##  5     6         12 jun  
##  6    10         12 out  
##  7    12         12 dez  
##  8     1         14 jan  
##  9    11         14 nov  
## 10     2         16 fev  
## 11     8         18 ago  
## 12     4         19 abr</code></pre>
</div>
<div id="uso-do-data-table-dt" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Uso do <em>Data Table</em> (DT)</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="atividades.html#cb17-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2014</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="atividades.html#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(aisp<span class="sc">==</span><span class="st">&quot;AISP 12 - Itapuã&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="atividades.html#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(mes,homicidios) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(homicidios) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="atividades.html#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">140101</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="atividades.html#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(MES,homicidios) <span class="sc">%&gt;%</span>  <span class="fu">arrange</span>(MES) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="atividades.html#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>()</span></code></pre></div>
<div id="htmlwidget-104fac9d621b88638aab" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-104fac9d621b88638aab">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12"],["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],[14,16,10,19,8,12,7,18,10,12,14,12]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>MES<\/th>\n      <th>homicidios<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="resolução-de-situações-problemas" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Resolução de situações problemas</h2>
<p>Nesta seção desejamos apresentar o resultado de
análise das ocorrências de crimes na região
central da cidade constituída pela
Região Integrada de Segurança Pública (<strong>RISP CTL</strong>).</p>
<p>Aqui trabalharemos com o banco de dados construído
a partir de boletins mensais disponibilizados
pela <a href="http://www.ssp.ba.gov.br/modules/conteudo/conteudo.php?conteudo=102">Secretaria de Segurança Pública</a>.</p>
<p>Primeiro faremos os filtros necessarios:</p>
<ul>
<li><em>AISP 11 - Tancredo Neves</em>,<em>AISP 10 - Pau da Lima</em> e <em>AISP 13 - Cajazeiras</em>;</li>
<li>Definicao de um ano especifico, para os últimos 12 meses válidos é <strong>2019</strong>;</li>
<li>Seleção de variáveis Homicídios e Lesão Seguida de Morte</li>
</ul>
<div id="código-filtros-e-seleções" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Código filtros e seleções</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="atividades.html#cb18-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb18-2"><a href="atividades.html#cb18-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb18-3"><a href="atividades.html#cb18-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="atividades.html#cb18-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="atividades.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,homicidios,lesao_morte) </span></code></pre></div>
<pre><code>## # A tibble: 36 x 3
##      mes homicidios lesao_morte
##    &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
##  1     1          7           0
##  2     1         10           0
##  3     1          4           0
##  4     2          5           0
##  5     2          6           0
##  6     2          1           0
##  7     3          6           0
##  8     3         17           0
##  9     3         10           1
## 10     4          3           0
## # … with 26 more rows</code></pre>
</div>
<div id="código---manipulação-de-datas" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Código - manipulação de datas</h3>
<p>Embora haja a variável mês no nosso conjunto de
dados, ela está no formato numérico, que para
a produção de visualizações de dados discretizados
no domínio do tempo é mais conveniente sua apresentação
com a formatação de datas e ou horários. Portanto,
utilizaremos outro pacote do conjunto <a href="https://www.tidyverse.org/">tidyverse</a>, o
<a href="https://lubridate.tidyverse.org/">lubridate</a>.
A seguir, demonstraremos a conversão dos dados
numéricos no seus correspondentes símbolos de
data.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="atividades.html#cb20-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb20-2"><a href="atividades.html#cb20-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb20-3"><a href="atividades.html#cb20-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="atividades.html#cb20-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="atividades.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,homicidios,lesao_morte) <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="atividades.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">190115</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 36 x 4
##      mes homicidios lesao_morte MES  
##    &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;ord&gt;
##  1     1          7           0 jan  
##  2     1         10           0 jan  
##  3     1          4           0 jan  
##  4     2          5           0 fev  
##  5     2          6           0 fev  
##  6     2          1           0 fev  
##  7     3          6           0 mar  
##  8     3         17           0 mar  
##  9     3         10           1 mar  
## 10     4          3           0 abr  
## # … with 26 more rows</code></pre>
<p>A última linha do código contém um <code>mutate()</code>. No qual,
é adotada uma data de referência, neste caso, <code>ymd(190115)</code>
correponde a data <em>15/jan/2019</em> definido pela
função <code>ymd()</code> em seguida é somado o valor correspondente
a cada mês com <code>mes-1</code>, pois assim somaremos 0 meses a data de
<em>15/jan/2019</em> e assim obteremos a representação adequada de todos os meses e o extrairemos por meio de outro comando do pacote
<a href="https://lubridate.tidyverse.org/">lubridate</a>, chamado <code>month(...,label=TRUE)</code> no qual a <em>option</em> ``label=TRUE``` nos
fornecerá a variável <em>jan,fev,…,dez</em>.</p>
</div>
<div id="código-gráficos" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Código Gráficos</h3>
<p>Para a construção dos gráficos é necessário
estudar <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf"><em>cheatsheet</em></a>
da biblioteca do <a href="https://ggplot2.tidyverse.org/"><em>ggplot2</em></a>.</p>
<p>Para realizar esta produção gráfica de maneira adequada
é conveniente que os dados sejam corretamente
prepados. Tinhamos o objetivo inicial de
construir os gráficos de maneira que as variáveis
dos crimes ficassem empilhadas, portanto,
devemos averiguar se a estrutura do nosso
banco está da forma mais apropriada para
o uso da biblioteca do <a href="https://ggplot2.tidyverse.org/"><em>ggplot2</em></a>
na sua forma mais simples de uso, ou se devemos
utilizar recursos da própria biblioteca gráfica
para alcançar nossos resultados.</p>
<p>Para aproveitar melhor a
<a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">folha de dicas do ggplot2</a>
é necessário conhecer os tipos de variáveis
que estamos trabalhando. Sabemos que a nossa variável
que ocupará a abscissa são as representações
as abreviaturas dos meses, portanto,
variáveis categoricas ou discretas, especialmente
poir serem variáveis produzidas pelo pacote <em>lubridate</em>
herdaram propriedades de ordenação temporal <code>&lt;ord&gt;</code>.
Enquanto que as variáveis dos crimes foram
imprtadas do banco como <em>double</em> (<code>&lt;dbl&gt;</code>).
Assim, em resumo temos uma variavél <strong>discrete</strong> e outra
<strong>continuos</strong>. Portanto, ao consultarmos a seção
<strong>discrete x, continous y</strong> do
<a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">folha de dicas do ggplot2</a> chegamos a conclusão que devemos usar
a <code>geom_col()</code> para a geometria do nosso gráfico.
Primeiro faremos os gráficos
de ocorrências de homicídios:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="atividades.html#cb22-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb22-2"><a href="atividades.html#cb22-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb22-3"><a href="atividades.html#cb22-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="atividades.html#cb22-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="atividades.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,homicidios,lesao_morte) <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="atividades.html#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">190115</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="atividades.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> MES,<span class="at">y =</span> homicidios,<span class="at">colour=</span><span class="st">&#39;red&#39;</span>)) <span class="sc">+</span> <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="anotacoes_trein_r_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>destacamos o contorno das observações em vermelho para mostar
que este tipo de gráfico é construído de tal maneira que
não efetua uma soma ao longo das linhas e sim empilha
as observações sendo que são proporcionais aos seus respectivos valores. Para cada mês, para o filtro que realizamos acima, possui 3
valores que correpondem às <em>AISP 11 - Tancredo Neves</em>,<em>AISP 10 - Pau da Lima</em> e <em>AISP 13 - Cajazeiras</em>. Para aperfeiçoar a apresentação deste gráfico podemos colori-lo em função das AISPs, mas
antes temos incluir a variável <em>aisp</em> no <code>select()</code> como realizado
abaixo:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="atividades.html#cb23-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb23-2"><a href="atividades.html#cb23-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb23-3"><a href="atividades.html#cb23-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="atividades.html#cb23-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="atividades.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,aisp,homicidios,lesao_morte) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="atividades.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">190115</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="atividades.html#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> MES,<span class="at">y =</span> homicidios,<span class="at">fill=</span>aisp)) <span class="sc">+</span> <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="anotacoes_trein_r_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Vamos explorar um pouco mais as funcionalidades desta biblioteca.
A opção <em>default</em> produz a versão empilhadas de observações pertencentes às categorias das abscissas, neste caso são os meses.
A seguir, apresentamos outro gráfico, apenas colocando as observações de cada <em>aisp</em> lado a lado, facilitando a comparação dos gráficos
apenas trabalhando com uma <em>option</em> na geometria <code>geom_col(position = 'dodge')</code>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="atividades.html#cb24-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb24-2"><a href="atividades.html#cb24-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb24-3"><a href="atividades.html#cb24-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="atividades.html#cb24-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="atividades.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,aisp,homicidios,lesao_morte) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="atividades.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">190115</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="atividades.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> MES,<span class="at">y =</span> homicidios,<span class="at">fill=</span>aisp)) <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&#39;dodge&#39;</span>)</span></code></pre></div>
<p><img src="anotacoes_trein_r_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Desta vez o objetivo é a comparação de dois crimes, ocorrências de
homicídios e lesão seguida de morte, para alcaçar tal objetivo
é necessário que os crimes sejam organizados de forma similar
à variável <em>aisp</em>, para isto utilizaremos o comando <code>gather()</code>
que pertence ao pacote <code>tidyr</code>,
demonstraremos esta transformação:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="atividades.html#cb25-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb25-2"><a href="atividades.html#cb25-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb25-3"><a href="atividades.html#cb25-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="atividades.html#cb25-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="atividades.html#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,aisp,homicidios,lesao_morte) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="atividades.html#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">190115</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="atividades.html#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> crimes,<span class="at">value =</span> valores,<span class="sc">-</span>mes,<span class="sc">-</span>aisp,<span class="sc">-</span>MES) <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="atividades.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(MES)</span></code></pre></div>
<pre><code>## # A tibble: 72 x 5
##      mes aisp                     MES   crimes      valores
##    &lt;dbl&gt; &lt;chr&gt;                    &lt;ord&gt; &lt;chr&gt;         &lt;dbl&gt;
##  1     1 AISP 10 - Pau da Lima    jan   homicidios        7
##  2     1 AISP 11 - Tancredo Neves jan   homicidios       10
##  3     1 AISP 13 - Cajazeiras     jan   homicidios        4
##  4     1 AISP 10 - Pau da Lima    jan   lesao_morte       0
##  5     1 AISP 11 - Tancredo Neves jan   lesao_morte       0
##  6     1 AISP 13 - Cajazeiras     jan   lesao_morte       0
##  7     2 AISP 10 - Pau da Lima    fev   homicidios        5
##  8     2 AISP 11 - Tancredo Neves fev   homicidios        6
##  9     2 AISP 13 - Cajazeiras     fev   homicidios        1
## 10     2 AISP 10 - Pau da Lima    fev   lesao_morte       0
## # … with 62 more rows</code></pre>
<p>entre os argumentos da função ``gather()``` estão
<em>key</em> que recebe as <em>tags</em> das variáveis (
neste caso são <em>homicidios</em> e <em>lesao_morte</em>) e
<em>value</em> que recebe os respectivos valores das variáveis.
Assim os dados são empilhados. As variáveis que são acompanhados
de sinal menos <span class="math inline">\(-\)</span> não são <em>empilhadas</em>.
Agora é possível produzir uma visualização gráfica
como realizado em etapas anteriores:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="atividades.html#cb27-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb27-2"><a href="atividades.html#cb27-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb27-3"><a href="atividades.html#cb27-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="atividades.html#cb27-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="atividades.html#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,aisp,homicidios,lesao_morte) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="atividades.html#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">190115</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="atividades.html#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> crimes,<span class="at">value =</span> valores,<span class="sc">-</span>mes,<span class="sc">-</span>aisp,<span class="sc">-</span>MES) <span class="sc">%&gt;%</span></span>
<span id="cb27-8"><a href="atividades.html#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> MES,<span class="at">y =</span> valores,<span class="at">fill=</span>crimes)) <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&#39;dodge&#39;</span>)</span></code></pre></div>
<p><img src="anotacoes_trein_r_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Como os casos lesão seguida de morte são zero para quase todos os
meses não é possível observar as barras azuis em alguns meses.</p>
<p>Por uma questão de identidade visual podemos estar interessados em manipular um gráfico para alcançar uma respentação visual mais
refinada. Aqui tentaremos nos aproximar da identidade visual do
site do grupo <a href="https://www.gamma.ufba.br">Gamma</a>
por meio das funções <code>theme()</code> e <code>scale_fill_manual()</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="atividades.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## FILTROS</span></span>
<span id="cb28-2"><a href="atividades.html#cb28-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">filter</span>(aisp <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&#39;AISP 11 - Tancredo Neves&#39;</span>,</span>
<span id="cb28-3"><a href="atividades.html#cb28-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 10 - Pau da Lima&#39;</span>,</span>
<span id="cb28-4"><a href="atividades.html#cb28-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;AISP 13 - Cajazeiras&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="atividades.html#cb28-5" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(ano<span class="sc">==</span><span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="atividades.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="do">## SELECAO  </span></span>
<span id="cb28-7"><a href="atividades.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mes,aisp,homicidios,lesao_morte) <span class="sc">%&gt;%</span></span>
<span id="cb28-8"><a href="atividades.html#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="do">## TRANSFORMACAO  </span></span>
<span id="cb28-9"><a href="atividades.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">MES =</span> <span class="fu">month</span>(<span class="fu">ymd</span>(<span class="dv">190115</span>) <span class="sc">+</span> <span class="fu">months</span>(mes <span class="sc">-</span> <span class="dv">1</span>), <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-10"><a href="atividades.html#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> crimes,<span class="at">value =</span> valores,<span class="sc">-</span>mes,<span class="sc">-</span>aisp,<span class="sc">-</span>MES) <span class="sc">%&gt;%</span></span>
<span id="cb28-11"><a href="atividades.html#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="do">## MAPEAMENTO  </span></span>
<span id="cb28-12"><a href="atividades.html#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> MES,<span class="at">y =</span> valores,<span class="at">fill=</span>crimes)) <span class="sc">+</span> </span>
<span id="cb28-13"><a href="atividades.html#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="do">## DEFINICAO GEOMETRIA  </span></span>
<span id="cb28-14"><a href="atividades.html#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&#39;dodge&#39;</span>)<span class="sc">+</span> </span>
<span id="cb28-15"><a href="atividades.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="do">## INCLUSAO DE LABELS   </span></span>
<span id="cb28-16"><a href="atividades.html#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Ocorrências mensais RISP CTL&quot;</span>,</span>
<span id="cb28-17"><a href="atividades.html#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;mês&quot;</span>,</span>
<span id="cb28-18"><a href="atividades.html#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Nº de ocorrências&quot;</span></span>
<span id="cb28-19"><a href="atividades.html#cb28-19" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb28-20"><a href="atividades.html#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="do">## ALTERACAO FONTS LABS  </span></span>
<span id="cb28-21"><a href="atividades.html#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>,<span class="at">colour =</span> <span class="st">&quot;white&quot;</span>))<span class="sc">+</span></span>
<span id="cb28-22"><a href="atividades.html#cb28-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>)) <span class="sc">+</span></span>
<span id="cb28-23"><a href="atividades.html#cb28-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>)) <span class="sc">+</span></span>
<span id="cb28-24"><a href="atividades.html#cb28-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>,<span class="at">size =</span><span class="dv">12</span>))  <span class="sc">+</span></span>
<span id="cb28-25"><a href="atividades.html#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="do">##  ALTERACAO FONTS LEGENDA </span></span>
<span id="cb28-26"><a href="atividades.html#cb28-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size =</span><span class="dv">11</span>)) <span class="sc">+</span></span>
<span id="cb28-27"><a href="atividades.html#cb28-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">NA</span>,</span>
<span id="cb28-28"><a href="atividades.html#cb28-28" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">size=</span><span class="fl">0.5</span>, <span class="at">linetype=</span><span class="st">&quot;solid&quot;</span>, </span>
<span id="cb28-29"><a href="atividades.html#cb28-29" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">colour =</span><span class="cn">NA</span>))<span class="sc">+</span></span>
<span id="cb28-30"><a href="atividades.html#cb28-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">&#39;Crimes&#39;</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Homicídios&quot;</span>, <span class="st">&quot;Lesão/Morte&quot;</span>))<span class="sc">+</span></span>
<span id="cb28-31"><a href="atividades.html#cb28-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour=</span><span class="st">&quot;white&quot;</span>, <span class="at">size=</span><span class="dv">10</span>, </span>
<span id="cb28-32"><a href="atividades.html#cb28-32" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">face=</span><span class="st">&quot;bold&quot;</span>))<span class="sc">+</span></span>
<span id="cb28-33"><a href="atividades.html#cb28-33" aria-hidden="true" tabindex="-1"></a><span class="do">## ALTERACAO BACKGROUD DA AREA DE PLOTAGEM  - PARTE EXTERNA</span></span>
<span id="cb28-34"><a href="atividades.html#cb28-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;#363636&quot;</span>))<span class="sc">+</span></span>
<span id="cb28-35"><a href="atividades.html#cb28-35" aria-hidden="true" tabindex="-1"></a><span class="do">## ALTERACAO BACKGROUD DA AREA DE PLOTAGEM  - PARTE INTERNA</span></span>
<span id="cb28-36"><a href="atividades.html#cb28-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(), <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>())<span class="sc">+</span></span>
<span id="cb28-37"><a href="atividades.html#cb28-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;#009FE3&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>))<span class="sc">+</span></span>
<span id="cb28-38"><a href="atividades.html#cb28-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">&quot;#7D7D7D&quot;</span>,<span class="at">color =</span> <span class="st">&quot;#7D7D7D&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>),     <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;#009FE3&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>),</span>
<span id="cb28-39"><a href="atividades.html#cb28-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;#009FE3&quot;</span>, <span class="at">size =</span> .<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb28-40"><a href="atividades.html#cb28-40" aria-hidden="true" tabindex="-1"></a>  <span class="do">## DEFINICAO CORES MANUAL  </span></span>
<span id="cb28-41"><a href="atividades.html#cb28-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;gray&quot;</span>),<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Homicídios&quot;</span>, <span class="st">&quot;Lesão/Morte&quot;</span>))</span></code></pre></div>
<pre><code>## Scale for &#39;fill&#39; is already present. Adding another scale for &#39;fill&#39;, which
## will replace the existing scale.</code></pre>
<p><img src="anotacoes_trein_r_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="manipulação-de-dados.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="controle-de-versões-de-projetos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["anotacoes_trein_r.pdf", "anotacoes_trein_r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
